#!/bin/bash

# 1. –ó–∞–ø—É—Å–∫ Redis-—Å–µ—Ä–≤–µ—Ä–∞
echo "üîÑ –ó–∞–ø—É—Å–∫ Redis-—Å–µ—Ä–≤–µ—Ä–∞..."
sudo service redis-server start

echo "‚úÖ Redis –∑–∞–ø—É—â–µ–Ω."

# 2. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo "üîÑ –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
source ../.venv/bin/activate  # –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å

echo "‚úÖ –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ."

# 3. –ó–∞–ø—É—Å–∫ Django-—Å–µ—Ä–≤–µ—Ä–∞
echo "üîÑ –ó–∞–ø—É—Å–∫ Django-—Å–µ—Ä–≤–µ—Ä–∞..."
python manage.py runserver 0.0.0.0:8000 &

echo "‚úÖ Django-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://127.0.0.1:8000"

# 4. –ó–∞–ø—É—Å–∫ Celery –≤–æ—Ä–∫–µ—Ä–∞ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
echo "üîÑ –ó–∞–ø—É—Å–∫ Celery –≤–æ—Ä–∫–µ—Ä–∞..."
# –ó–∞–ø—É—Å–∫–∞–µ–º Celery –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞–º–µ–Ω–∏—Ç–µ your_user_name –Ω–∞ –Ω—É–∂–Ω–æ–µ –∏–º—è)
sudo -u your_user_name celery -A bybit_analysis.celery worker --loglevel=info --pool=prefork &

echo "‚úÖ Celery –∑–∞–ø—É—â–µ–Ω."

